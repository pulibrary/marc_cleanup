---
version: 2.1

orbs:
  ruby: circleci/ruby@0.1

jobs:
  build:
    docker:
      - image: cimg/ruby:3.0
    executor: ruby/default
    steps:
      - checkout
      - run: gem install bundler -v '2.2.32'
      - ruby/bundle-install
      - run:
          name: rspec
          command: bundle exec rspec
      - run:
          name: finish up coverage
          command: curl -k https://coveralls.io/webhook?repo_token=$COVERALLS_REPO_TOKEN -d "payload[build_num]=$CIRCLE_WORKFLOW_ID&payload[status]=done"
